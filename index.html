<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><html>
<head>
<title>Chris and Emma</title>
<meta charset="utf-8">
<meta name="description" content="Chris and Emma are getting married!">
<meta property="og:title" content="Chris+Emma=Love" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://chrisandemma.love/" />
<meta property="og:image" content="http://chrisandemma.love/san_diego.jpeg" />
<meta property="og:description" content="Chris and Emma are getting married!">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="favicon.ico?" type="image/x-icon">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-geo.v1.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css?family=Raleway+Dots');
@import url('https://fonts.googleapis.com/css?family=Poiret+One');
@import url('https://fonts.googleapis.com/css?family=Alegreya+Sans:100');
@import url('https://fonts.googleapis.com/css?family=Sacramento');
body {
  font-family: "Alegreya Sans", sans;
  font-size: 28px;
  margin: 0;
  text-rendering: optimizeLegibility;
  text-transform: none;
  color: rgb(44,58, 87);
  background-color: #fdfdf7;
}


#masthead {
  font-family: 'Raleway Dots';
  font-size: 100px;
  color: white;
  padding-top: 0.25em;
  padding-bottom: 0.25em;
  background: rgb(139,200, 184);
  background-repeat: repeat-x;
  background-position: 0 0;
  text-transform: none;
}

.container {
  margin-left: auto;
  margin-right: auto;
  max-width: 560px;
}

#main_content {
  margin: 0;
  padding-right: 0.25em;
  padding-left: 0.25em;
  padding-top: 0.25em;
  padding-bottom: 0.25em;
}

h1, h2, h3, h4 {
   font-family: 'Poiret One', sans;
   font-weight: 100;
   color: rgb(44,58, 87);
   text-rendering: optimizeLegibility;
}

h1 {
   line-height: 1.2em;
   letter-spacing: -0.025em;
   font-weight: 1200;
   font-size: 52px;
   margin-top: 0;
   margin-right: 0;
   margin-bottom: 0;
   margin-left: 0;
   text-transform: none;
}


.center {
  text-align: center;
}


#date {
  text-align: center;
  font-weight: 100;
  font-family: 'Poiret One';
  font-size: 56px;
}

#where a {
  color: rgb(139,200, 184);
  text-decoration: none;
}
#where a:visted {
   color: rgb(139,200, 184);
}


 #footer {
    background: #596e79;
    background-repeat: repeat-x;
    background-position: 0 0;
    padding-top: 1.25em;
    padding-bottom: 1.25em;
    color: white;
    font-family: 'Poiret One';
    clear: both;
  }

  #footer .names {
    font-size: 30px;
  }

  #footer a {
    color: white;
    text-decoration: none;
  }
  site_icon {
      padding-right: 0.25em;
  }

  #eucy_horiz {
    font-size: 60px;
    padding-top: 1em;
    background-image: url('eucy_horiz.png');
    width: 300px;
    height: 140px;
    background-size: 300px 120px;
    background-repeat: no-repeat;
    background-position-x: -10px;
    background-position-y: 50px;
  }

  #walking {
      padding-top: 0.25em;
      padding-bottom: 1em;
      width: 300px;
  }

  #the_insert {
    font-family: 'Sacramento';
    font-size: 36px;
    font-weight: 100;
  }

  
  #map {
   width: 300px;
   height: 640px;
   }

  #location {
    text-align: center;
    padding-top: 0.25em;
    padding-bottom: 0.25em;
  }

#map_svg {
  width: 300;
  height: 400;
  background-color: #2f3d4c;
  font-family: 'Poiret One';
  font-size: 20px;
  text-transform: lowercase;
  dominant-baseline: central;
}

#map_svg .airport {
  fill: #fe6926;
}

#map_svg #stfrancis {
  fill: #ce3a30;
}

#map_svg .city {
  fill: black;
}

#map_svg .highway_marker {
  font-family: 'Alegreya Sans';
  font-size: 18px;
  fill: white;
}



@media (min-width: 800px) {
    #masthead {
      padding-top: 0.5em;
      padding-bottom: 0.5em;
    }
    #main_content {
      padding-top: 1em;
      padding-bottom: 2em;
    }
    #date {
     font-size: 80px;
    }
    #walking {
      padding-top: .5em;
      padding-bottom: 1.25em;
      width: 500px;
    }
    #location {
     padding-top: 1em;
     padding-bottom: 1em;
    }
    #map {
     padding-top: 2em;
     width: 500px;
     height: 640px;
    }
    #map_svg { 
     width: 500px;
     height: 600px;
     font-size: 28px;
    }

    #footer .names {
    font-size: 56px;
    }
    site_icon {
      padding-right: 1em;
    }
}

</style>
<body>
  <div id="masthead">
    <center>
      Chris & Emma
    </center>
  </div>
  <div id="container">
    <div id="main_content">
      <center>
	<div id="walking">
	  <img style="max-width: 100%; max-height:100%" src="san_diego.jpeg">
	</div>
      </center>
      <center>
      <h1 id="eucy_horiz" class="center">
	Save <span id="the_insert">the</span> Date
      </h1>
      </center>
      <p class="center">
	We are getting married!
      </p>
      <div id="date">
       8 . 12 . 17
      </div>
      <p id="where" class="center">
	<a href="http://www.stfranciswinery.com/">St. Francis Winery</a></br>
	Santa Rosa, California </br>
      </p>
      <center>
        <svg id='map_svg'></svg>
      </center>
    </div>
  </div>
  <div id="footer">
    <div class="container">
      <center>
	<site_icon>
          <a href="mailto:cmmaes@gmail.com"><span class="names">chris</span></a>
        </site_icon>
	<site_icon onclick="document.getElementById('like').className = 'fa fa-heart fa-2x'">
          <i id="like" class="fa fa-heart-o fa-2x"></i>
        </site_icon>
	<site_icon>
	  <span class="names">
	  <a href="mailto:emmafaye@gmail.com">emma</i></a>
          </span>
	</site_icon>
      </center>
    </div>
  </div>
</body>
<script>

var svg = d3.select("#map_svg"),
    width = +svg.style("width").slice(0,-2),
    height = +svg.style("height").slice(0,-2);


var g = svg.append("g");


queue()
  .defer(d3.json, 'bay_area_geo.json')
  .defer(d3.json, 'bay_area_highway_edited.json')
  .await(makeMyMap);

function makeMyMap(error, bay_area, highways) {
  if (error) throw error;

  var projection = d3.geoConicEqualArea().parallels([36, 38]).rotate([120, 0]).fitExtent([[-100,-20],[width+110, height+10]], bay_area);

  var path = d3.geoPath(projection);


  svg.selectAll(".map_poly")
     .data(bay_area.features)
     .enter().append("path")
       .attr("d", path)
       .attr("style", "stroke: black; fill: rgb(139,200, 184);");

  console.log(highways);
  svg.selectAll(".map_poly")
        .data(highways.features)
        .enter().append("path")
        .attr("class", function(d) { return 'c' +  d.properties.RouteID;})
        .attr("d", path)
        .attr("style", function(d) {
                         console.log(d.properties.RouteID);
                         if (d.properties.RouteID !== '121_20080130_R') {
                          return "stroke: white; stroke-width: 2px; fill: none";
                         } else {
                          return "visibility: hidden;";
                         }});

  var st_francis = [-122.577243, 38.436895];
  console.log(projection(st_francis));

  svg.append('g')
      .attr("transform", "translate(" + 
                          projection(st_francis)[0] + "," + 
                          projection(st_francis)[1] + ")")
                 .append('image')
                 .attr('xlink:href', 'heart.png')
                 .attr('x', -10)
                 .attr('y', -10)
                 .attr('width', 24)
                 .attr('height', 24);

  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(st_francis)[0] + 20) + "," + 
                          projection(st_francis)[1] + ")")
                 .append('text')
                 .attr('id', 'stfrancis')
                 .text(function(d) { return 'St. Francis'});

  var sfo = [-122.3789554,37.6213129]
  svg.append('g')
      .attr("transform", "translate(" + 
                          projection(sfo)[0] + "," + 
                          projection(sfo)[1] + ")")
                 .append('image')
                 .attr('xlink:href', 'airplane.png')
                 .attr('x', -10)
                 .attr('y', -10)
                 .attr('width', 24)
                 .attr('height', 24);

  var right_padding = width >= 500 ? 10 : 5;
  var left_padding = width >= 500 ? 45 : 35;

  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(sfo)[0] - left_padding) + "," + 
                          projection(sfo)[1] + ")")
                 .append('text')
                 .attr('class', 'airport')
                 .attr('text-anchor', 'right')
                 .text(function(d) { return 'SFO'});


  var oak_padding_icon = width >= 500 ? 0 : 10;
  var oak_padding = width >= 500 ? 60 : 55;
  var oakland = [-122.2197428,37.7125689];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(oakland)[0] - oak_padding_icon) +  "," + 
                          projection(oakland)[1] + ")")
                 .append('image')
                 .attr('xlink:href', 'airplane.png')
                 .attr('x', -15)
                 .attr('y', -10)
                 .attr('width', 24)
                 .attr('height', 24);


  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(oakland)[0] - oak_padding) + "," + 
                          projection(oakland)[1] + ")")
                 .append('text')
                 .attr('class', 'airport')
                 .text(function(d) { return 'OAK'});

  var santa_rosa_padding = width >= 500 ? 120 : 100;
  var santa_rosa = [-122.7142915,38.4409623];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(santa_rosa)[0]-santa_rosa_padding) + "," + 
                          projection(santa_rosa)[1] +  ")")
                 .append('text')
                 .attr('class', 'city')
                 .text(function(d) { return 'Santa Rosa'});

  var sonoma = [-122.4648242,38.2909966];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(sonoma)[0] + right_padding) + "," + 
                          projection(sonoma)[1] +  ")")
                 .append('text')
                 .attr('class', 'city')
                 .text(function(d) { return 'Sonoma'});

  var sf_padding = width >= 500 ? 100 : 80;
  var sf = [-122.5076403, 37.7576793];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(sf)[0] - sf_padding) + "," + 
                          projection(sf)[1] +  ")")
                 .append('text')
                 .attr('class', 'city')
                 .attr('style', 'fill: white')
                 .text(function(d) { return 'San Franscio'});

  var marker_101 = [-122.515821, 37.9122075];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(marker_101)[0] - 30) + "," + 
                          projection(marker_101)[1] +  ")")
                 .append('text')
                 .attr('class', 'highway_marker')
                 .text(function(d) { return '101';});

  var marker_12 = [-122.5022562, 38.3528241];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(marker_12)[0] - 30) + "," + 
                          projection(marker_12)[1] +  ")")
                 .append('text')
                 .attr('class', 'highway_marker')
                 .text(function(d) { return '12';});

  var marker_37 = [-122.4870027, 38.1301627];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(marker_37)[0] - 20) + "," + 
                          (projection(marker_37)[1] - 10) +  ")")
                 .append('text')
                 .attr('class', 'highway_marker')
                 .text(function(d) { return '37';});

  var marker_37_r = [-122.3553904, 38.1388446];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(marker_37_r)[0]) + "," + 
                          (projection(marker_37_r)[1] - 10) +  ")")
                 .append('text')
                 .attr('class', 'highway_marker')
                 .text(function(d) { return '37';});

  var marker_80 = [-122.3073391, 37.9749885];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(marker_80)[0] + right_padding) + "," + 
                          (projection(marker_80)[1]) +  ")")
                 .append('text')
                 .attr('class', 'highway_marker')
                 .text(function(d) { return '80';});

  var marker_880 = [-122.2376701, 37.7793846];
  svg.append('g')
      .attr("transform", "translate(" + 
                          (projection(marker_880)[0] + 10) + "," + 
                          (projection(marker_880)[1]) +  ")")
                 .append('text')
                 .attr('class', 'highway_marker')
                 .text(function(d) { return '880';});
}

</script>
